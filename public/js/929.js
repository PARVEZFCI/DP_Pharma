(self.webpackChunk=self.webpackChunk||[]).push([[929],{4929:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>o});const s={name:"RoleComponent",data:function(){return{AddRole:{name:""},AllError:[],roleData:{},search:"",custom_row:10,select_row:[10,20,30,40,50],editRole:{},permissions:[]}},methods:{AddNewRole:function(){var t=this,e=this;axios.post(base_path+"role",e.AddRole).then((function(a){201==a.data.status?(t.$toastr.success(a.data.message,"Role",{timeOut:5e3}),t.$refs.addFormClose.click(),e.getRole(),e.clearForm(e.AddRole)):t.$toastr.warning("Something Went Wrong","Sorry!",{timeOut:5e3})})).catch((function(a){422===a.response.status?e.AllError=a.response.data.errors:t.$toastr.error("Application Error","Sorry")}))},getRole:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,a=base_path+"role?q="+e.search+"&page="+t+"&row="+e.custom_row;axios.get(a).then((function(t){e.roleData=t.data})).catch((function(t){console.log(t)}))},DeleteRole:function(t,e){var a=this;this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&axios.delete(base_path+"role/"+t).then((function(t){200===t.data.status&&(a.getRole(),a.$swal("Deleted!",t.data.message,"success")),400===t.data.status&&a.$swal("Opps","Something Went Wrong","warning")})).catch((function(t){console.log(t)}))}))},chageRoleStatus:function(t){var e=this;axios.get(base_path+"role/status/"+t).then((function(t){200===t.data.status&&(e.getRole(),e.$swal("Role!",t.data.message,"success")),400===t.data.status&&e.$swal("Opps","Something Went Wrong","warning")}))},EditRole:function(t,e){this.editRole=e},updateRole:function(t){var e=this,a=this;axios.put(base_path+"role/"+t,a.editRole).then((function(t){201==t.data.status?(e.$toastr.success(t.data.message,"Role",{timeOut:5e3}),e.$refs.editModalClose.click(),e.getRole()):e.$toastr.warning("Something Went Wrong","Sorry!",{timeOut:5e3})})).catch((function(t){422===t.response.status?a.AllError=t.response.data.errors:e.$toastr.error("Application Error","Sorry")}))},clearForm:function(t){this.AllError=[],Object.keys(t).forEach((function(e){t[e]=""}))}},created:function(){this.getRole(),this.getUserPermissions()}};const o=(0,a(1900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",[t._v("Role")]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"panel panel-primary"},[a("div",{staticClass:"panel-heading"},[t._m(0),t._v(" "),t.permissions.includes("Add_Role")?a("div",{staticClass:"panel-options"},[a("button",{staticClass:"btn btn-blue btn-sm",staticStyle:{"margin-top":"4px"},attrs:{"data-target":"#addModal","data-toggle":"modal"}},[t._v("+ Add")])]):t._e()]),t._v(" "),a("div",{staticClass:"panel-heading"},[a("div",{staticClass:"pull-left col-sm-1"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label",staticStyle:{"margin-top":"15px"},attrs:{for:"entries"}},[t._v("Show")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.custom_row,expression:"custom_row"}],staticClass:"form-control",staticStyle:{position:"absolute",top:"6px",left:"59px"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.custom_row=e.target.multiple?a:a[0]},function(e){return t.getRole()}]}},t._l(t.select_row,(function(e){return a("option",{domProps:{textContent:t._s(e)}})})),0)])]),t._v(" "),a("div",{staticClass:"pull-right"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",staticStyle:{"margin-top":"10px","margin-left":"-12px"},attrs:{"aria-controls":"DataTables_Table_2",placeholder:"Search",type:"search"},domProps:{value:t.search},on:{keyup:t.getRole,input:function(e){e.target.composing||(t.search=e.target.value)}}})])])]),t._v(" "),a("table",{staticClass:"table table-bordered table-responsive"},[t._m(1),t._v(" "),a("tbody",t._l(t.roleData.data,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[t._v(t._s(++s))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",{staticClass:"text-center"},[a("div",{staticClass:"label",class:1==e.status?"label-success":"label-warning"},[t._v(t._s(1==e.status?"On":"Off"))])]),t._v(" "),a("td",{staticClass:"text-center"},[t.permissions.includes("Permission_Role")?a("router-link",{staticStyle:{"margin-top":"4px"},attrs:{to:{name:"/admin/role/view",params:{id:e.id}},type:"button"}},[a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-eye"})])]):t._e(),t._v(" "),t.permissions.includes("Status_Role")?a("button",{staticClass:"btn btn-sm",class:1==e.status?"btn-success":"btn-warning",attrs:{type:"button"},on:{click:function(a){return t.chageRoleStatus(e.id)}}},[a("i",{staticClass:"fa fa-sync"})]):t._e(),t._v(" "),t.permissions.includes("Edit_Role")?a("button",{staticClass:"btn btn-info btn-sm",attrs:{"data-target":"#editModal","data-toggle":"modal",type:"button"},on:{click:function(a){return t.EditRole(e.id,e)}}},[a("i",{staticClass:"fa fa-edit"})]):t._e(),t._v(" "),t.permissions.includes("Delete_Role")?a("button",{staticClass:"btn btn-red btn-sm",on:{click:function(a){return t.DeleteRole(e.id,s)}}},[a("i",{staticClass:"fa fa-trash"})]):t._e()],1)])})),0)]),t._v(" "),a("pagination",{staticStyle:{"margin-left":"20px"},attrs:{data:t.roleData,limit:3},on:{"pagination-change-page":t.getRole}},[a("span",{attrs:{slot:"prev-nav"},slot:"prev-nav"},[t._v("< Previous")]),t._v(" "),a("span",{attrs:{slot:"next-nav"},slot:"next-nav"},[t._v("Next >")])])],1),t._v(" "),a("div",{staticClass:"modal fade in",attrs:{"aria-hidden":"true",id:"addModal",tabindex:"-1"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.AddNewRole(e)}}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group",class:t.AllError.name?"validate-has-error":""},[a("label",{attrs:{for:"name"}},[t._v("Role name:*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.AddRole.name,expression:"AddRole.name"}],staticClass:"form-control",attrs:{id:"name",placeholder:"Enter Role name",type:"text"},domProps:{value:t.AddRole.name},on:{input:function(e){e.target.composing||t.$set(t.AddRole,"name",e.target.value)}}}),t._v(" "),t.AllError.name?a("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.AllError.name[0])}}):t._e()])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-success"},[t._v("Save")]),t._v(" "),a("button",{ref:"addFormClose",staticClass:"btn btn-secondary",attrs:{"data-dismiss":"modal",type:"button"},on:{click:function(e){return t.clearForm(t.AddRole)}}},[t._v("Close")])])])])])]),t._v(" "),a("div",{staticClass:"modal fade in",attrs:{"aria-hidden":"true",id:"editModal",tabindex:"-1"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(3),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.updateRole(t.editRole.id)}}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group",class:t.AllError.name?"validate-has-error":""},[a("label",{attrs:{for:"name"}},[t._v("Role name:*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editRole.name,expression:"editRole.name"}],staticClass:"form-control",attrs:{placeholder:"Enter Role name",type:"text"},domProps:{value:t.editRole.name},on:{input:function(e){e.target.composing||t.$set(t.editRole,"name",e.target.value)}}}),t._v(" "),t.AllError.name?a("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.AllError.name[0])}}):t._e()])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-success"},[t._v("Save Changes")]),t._v(" "),a("button",{ref:"editModalClose",staticClass:"btn btn-secondary",attrs:{"data-dismiss":"modal",type:"button"}},[t._v("Close")])])])])])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-title"},[a("b",[t._v("Role List")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("#")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Name")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Status")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Action")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("b",[t._v("Add Role")])]),t._v(" "),a("button",{staticClass:"close",attrs:{"aria-label":"Close","data-dismiss":"modal",type:"button"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("b",[t._v("Edit Role")])]),t._v(" "),a("button",{staticClass:"close",attrs:{"aria-label":"Close","data-dismiss":"modal",type:"button"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],!1,null,null,null).exports}}]);