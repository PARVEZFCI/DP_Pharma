(self.webpackChunk=self.webpackChunk||[]).push([[528],{7528:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>r});const a={name:"UserAccessComponent",data:function(){return{AddUserAccess:{user_id:null,role_id:null},userAccessData:{},editUserAccess:{},user:{},role:{},permissions:[]}},methods:{getUser:function(){var t=this;axios.get(base_path+"allUser").then((function(e){t.user=e.data}))},getRole:function(){var t=this;axios.get(base_path+"allRole").then((function(e){t.role=e.data}))},addUserAccess:function(){var t=this,e=this;axios.post(base_path+"user_access",e.AddUserAccess).then((function(s){201==s.data.status?(t.$toastr.success(s.data.message,"User Access",{timeOut:5e3}),t.$refs.closeModal.click(),e.getUserAccess(),e.clearForm(e.AddUserAccess)):t.$toastr.warning("Something Went Wrong","Sorry!",{timeOut:5e3})})).catch((function(s){422===s.response.status?e.AllError=s.response.data.errors:t.$toastr.error("Application Error","Sorry")}))},getUserAccess:function(){var t=this,e=base_path+"user_access";axios.get(e).then((function(e){t.userAccessData=e.data})).catch((function(t){console.log(t)}))},DeleteUserAccess:function(t,e){var s=this;this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&axios.delete(base_path+"user_access/"+t).then((function(t){console.log(t.data),200===t.data.status&&(s.getUserAccess(),s.$swal("Deleted!",t.data.message,"success")),400===t.data.status&&s.$swal("Opps","Something Went Wrong","warning")})).catch((function(t){console.log(t)}))}))},clearForm:function(t){this.AllError=[],Object.keys(t).forEach((function(e){t[e]=""}))}},created:function(){this.getUserAccess(),this.getUser(),this.getRole(),this.getUserPermissions()}};const r=(0,s(1900).Z)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",[t._v("User Access")]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"panel panel-primary"},[s("div",{staticClass:"panel-heading"},[t._m(0),t._v(" "),s("div",{staticClass:"panel-options"},[t.permissions.includes("Add_User_Access")?s("button",{staticClass:"btn btn-blue btn-sm",staticStyle:{"margin-top":"4px"},attrs:{"data-target":"#addModal","data-toggle":"modal"}},[t._v("+ Add")]):t._e()])]),t._v(" "),s("table",{staticClass:"table table-bordered table-responsive"},[t._m(1),t._v(" "),s("tbody",t._l(t.userAccessData,(function(e,a){return"admin@gmail.com"!==e.users.email?s("tr",{key:a},[s("td",{staticClass:"text-center"},[t._v(t._s(++a))]),t._v(" "),s("td",[t._v(t._s(e.users?e.users.email:"Not Set"))]),t._v(" "),s("td",[t._v(t._s(e.roles?e.roles.name:"Not Set"))]),t._v(" "),s("td",{staticClass:"text-center"},[t.permissions.includes("Delete_User_Access")&&"Super Admin"!==e.roles.name?s("button",{staticClass:"btn btn-sm btn-red",on:{click:function(s){return t.DeleteUserAccess(e.id,a)}}},[s("i",{staticClass:"fa fa-trash"})]):t._e()])]):t._e()})),0)])]),t._v(" "),s("div",{staticClass:"modal fade in",attrs:{"aria-hidden":"true",id:"addModal",tabindex:"-1"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[t._m(2),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.addUserAccess(e)}}},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("User Email:*")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.AddUserAccess.user_id,expression:"AddUserAccess.user_id"}],staticClass:"form-control",attrs:{id:"email"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.AddUserAccess,"user_id",e.target.multiple?s:s[0])}}},t._l(t.user,(function(e,a){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.email))])})),0)]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"role"}},[t._v("Role:")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.AddUserAccess.role_id,expression:"AddUserAccess.role_id"}],staticClass:"form-control",attrs:{id:"role"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.AddUserAccess,"role_id",e.target.multiple?s:s[0])}}},t._l(t.role,(function(e,a){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-success"},[t._v("Save")]),t._v(" "),s("button",{ref:"closeModal",staticClass:"btn btn-secondary",attrs:{"data-dismiss":"modal",type:"button"},on:{click:function(e){return t.clearForm(t.AddUserAccess)}}},[t._v("Close")])])])])])])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel-title"},[s("b",[t._v("User Access List")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"text-center"},[t._v("#")]),t._v(" "),s("th",{staticClass:"text-center"},[t._v("Email")]),t._v(" "),s("th",{staticClass:"text-center"},[t._v("Role Name")]),t._v(" "),s("th",{staticClass:"text-center"},[t._v("Action")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("h4",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[s("b",[t._v("Add User Access")])]),t._v(" "),s("button",{staticClass:"close",attrs:{"aria-label":"Close","data-dismiss":"modal",type:"button"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])])}],!1,null,null,null).exports}}]);